<!DOCTYPE html>
<html lang="eng">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Meal</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" integrity="sha512-NmLkDIU1C/C88wi324HBc+S2kLhi08PN5GDeUVVVC/BVt/9Izdsc9SVeVfA1UZbY3sHUlDSyRXhCzHfr6hmPPw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="style.css">
	<script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>
    <script src="script.js"></script>
</head>

<body>

    <div id="loading-screen" class="loading-screen">
        <div class="spinner"></div>
        <p>Caricamento in corso...</p>
    </div>

    <!-- HEADER -->
    <div class="header">
    <ul class="menu">
    
        <!-- Logo -->
        <li>
            <img src="img/logo.png" alt="" >
        </li>
    
        <!-- Home -->
        <li><a href="#"><button type="button" class="btn btn-light">
            Home<img src="img/house-fill.svg" alt="Icona home" width="24" height="24">
        </button></a>
        </li>
    
        <!-- Filtro -->
        <li>
            <button type="button" id="openOverlay" class="btn btn-light">
                Filtra <img src="img/funnel-fill.svg" alt="Icona filtra" width="24" height="24">
            </button>
        </li>
    
            
        <!-- Barra di ricerca -->
        <li><form method="GET" action="elenco_meal.html" onsubmit="return checkFormMeal('meal')" class="w-100">
            <div id="errorMessagemeal" class="error-message"></div>
            <div class="input-group">
                <input type="text" id="searchInputMeal" placeholder="cerca una ricetta..." name="meal" class="form-control">
                <button id="searchButtonMeal" class="btn-search-dark" type="submit">Cerca</button>
            </div>
        </form>
        </li>
    
        <!-- Registrazione / mostra utente -->
        <li class="register" id="user-info">
            <!-- Questo elemento verrÃ  aggiornato dinamicamente -->
        </li>
    </ul>
    </div>
    
    <!-- Hero -->
    <div class="hero">
        <div class="hero__content reveal">
        <p class="intro-text">PGRC</p>
        <h1 class="big-text">Progetto applicazione web</h1>
    </div>
    <video autoplay muted loop id="video-back">
    <source src="img/video-back.mp4" type="video/mp4">
    </video>
    </div>
    
    <!-- Overlay -->
    <div id="overlay">
        <div class="content">
            <button id="closeOverlay" class="btn-close-overlay">&times;</button>
            <div class="filter-container">
                <!-- Filtra per ingrediente -->
                <form method="GET" action="elenco_meal.html" onsubmit="return checkFormMeal('ingredient')" class="w-100">
                    <label for="filtra_ingrediente">Filtra per ingrediente: </label>
                    <div id="errorMessageingredient" class="error-message"></div>
                    <input type="text" id="searchInputMealIngredient" placeholder="cerca un ingrediente..." name="ingredient" class="form-control">
                    <button id="searchButtonIngredients" class="btn btn-outline-dark" type="submit">Cerca</button>
                </form>

                <!-- Filtra per lettera -->
                <form method="GET" action="elenco_meal.html" onsubmit="return checkFormMeal('letter')" class="w-100">
                    <label for="filtra_lettera">Filtra per lettera: </label>
                    <div id="errorMessageletter" class="error-message"></div>
                    <select name="letter" id="searchInputMealLetter">
                        <option value="">Seleziona una lettera</option>
                        <!-- Aggiungere tutte le lettere dell'alfabeto -->
                        <option value="a">A</option>
                        <option value="b">B</option>
                        <option value="c">C</option>
                        <option value="d">D</option>
                        <option value="e">E</option>
                        <option value="f">F</option>
                        <option value="g">G</option>
                        <option value="h">H</option>
                        <option value="i">I</option>
                        <option value="j">J</option>
                        <option value="k">K</option>
                        <option value="l">L</option>
                        <option value="m">M</option>
                        <option value="n">N</option>
                        <option value="o">O</option>
                        <option value="p">P</option>
                        <option value="q">Q</option>
                        <option value="r">R</option>
                        <option value="s">S</option>
                        <option value="t">T</option>
                        <option value="u">U</option>
                        <option value="v">V</option>
                        <option value="w">W</option>
                        <option value="x">X</option>
                        <option value="y">Y</option>
                        <option value="z">Z</option>
                    </select>
                    <button id="searchButtonLetter" class="btn btn-outline-dark" type="submit">Cerca</button>
                </form>
            </div>
        </div>
    </div>


<script>

    document.getElementById('openOverlay').addEventListener('click', function() {
        document.getElementById('overlay').style.display = 'flex'
    })
    
    document.getElementById('closeOverlay').addEventListener('click', function() {
        document.getElementById('overlay').style.display = 'none'
    })

    document.addEventListener("DOMContentLoaded", function() {
        const loadingScreen = document.getElementById('loading-screen')
        loadingScreen.style.display = 'flex'
    
        fetchAndStoreMealsByIdRange(52764, 53085).then(() => {
            console.log('Dati scaricati e memorizzati con successo.')
            loadingScreen.style.display = 'none'
        }).catch(error => {
            console.error('Errore durante il download dei dati:', error)
            loadingScreen.style.display = 'none'
        })

        checkUserLogged()

    })
    
</script>

<!-- Jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flickity/3.0.0/flickity.pkgd.min.js" integrity="sha512-achKCfKcYJg0u0J7UDJZbtrffUwtTLQMFSn28bDJ1Xl9DWkl/6VDT3LMfVTo09V51hmnjrrOTbtg4rEgg0QArA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>    
	ScrollReveal().reveal('.reveal', {distance: '100px', duration: 1500 , easing: 'cubic-bezier(.215, .61, .355, 1)' , interval: 600})
	ScrollReveal().reveal('.zoom', {duration: 1500 , easing: 'cubic-bezier(.215, .61, .355, 1)' , interval: 200 , scale: 0.65 , mobile: false})
</script>

</body>
</html>